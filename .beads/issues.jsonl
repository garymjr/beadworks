{"id":"server-2fo","title":"Fix TypeScript errors in UI package","description":"Fix all typescript errors in the UI package","status":"open","priority":0,"issue_type":"chore","created_at":"2025-12-24T00:23:54.678001-07:00","updated_at":"2025-12-24T00:23:54.678001-07:00","labels":["chore","frontend","type-checking","typescript","ui"]}
{"id":"server-6oj","title":"Design Task Orchestration","description":"Build the task decomposition and execution pipeline","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-23T14:32:18.33412-07:00","updated_at":"2025-12-24T09:30:35.107101-07:00","close_reason":"Closed","labels":["architecture"],"deleted_at":"2025-12-24T09:30:35.107101-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-85o","title":"Implement Tool Registry","description":"Create dynamic tool loading and validation system","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-23T14:32:17.970423-07:00","updated_at":"2025-12-24T09:30:35.107101-07:00","labels":["system","tools"],"deleted_at":"2025-12-24T09:30:35.107101-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-c1b","title":"Configure Memory Store","description":"Set up vector database for episodic and semantic memory","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-23T14:32:17.616907-07:00","updated_at":"2025-12-24T09:30:35.107101-07:00","labels":["database","memory"],"deleted_at":"2025-12-24T09:30:35.107101-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-cwc","title":"Support multiple concurrent agent executions","description":"Enable running multiple AI agents simultaneously from the UI. Each task will have its own progress card with independent state tracking. Users can start work on multiple tasks at once and monitor each agent's progress in real-time.\n\n**Files to modify:**\n- packages/ui/src/routes/index.tsx - Update state management for multiple sessions\n- packages/ui/src/components/WorkProgressCard.tsx - Enhance card with duration, dismiss, click-to-expand\n- packages/ui/src/components/WorkProgressModal.tsx (new) - Detail modal for full event history\n\n**Design goal:** Follow the Digital Abacus pattern - stacked glass cards with glow effects, consistent with existing design system.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-24T11:49:20.854062-07:00","updated_at":"2025-12-24T11:49:26.348363-07:00"}
{"id":"server-cwc.1","title":"Phase 1: Update state for multiple concurrent work sessions","description":"","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-24T11:49:26.685469-07:00","updated_at":"2025-12-24T11:49:26.685469-07:00","dependencies":[{"issue_id":"server-cwc.1","depends_on_id":"server-cwc","type":"parent-child","created_at":"2025-12-24T11:49:26.686974-07:00","created_by":"daemon"}]}
{"id":"server-cwc.2","title":"Phase 2: Enhance WorkProgressCard with duration and dismiss","description":"","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-24T11:49:27.034007-07:00","updated_at":"2025-12-24T11:49:27.034007-07:00","dependencies":[{"issue_id":"server-cwc.2","depends_on_id":"server-cwc","type":"parent-child","created_at":"2025-12-24T11:49:27.036353-07:00","created_by":"daemon"}]}
{"id":"server-cwc.3","title":"Phase 3: Create WorkProgressModal for detailed event view","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-24T11:49:27.389474-07:00","updated_at":"2025-12-24T11:49:27.389474-07:00","dependencies":[{"issue_id":"server-cwc.3","depends_on_id":"server-cwc","type":"parent-child","created_at":"2025-12-24T11:49:27.391331-07:00","created_by":"daemon"}]}
{"id":"server-cwc.4","title":"Phase 1: Update state for multiple concurrent work sessions","description":"Modify index.tsx to track multiple active work sessions simultaneously.\n\n**Changes needed:**\n1. Change `activeWorkIssueId` from `string | null` to `Map\u003cstring, ActiveWorkSession\u003e`\n2. Update handleStartWork to add new sessions without removing existing ones\n3. Update handleWorkComplete/Error/Cancel to remove specific session from Map\n4. Remove the `activeWorkIssueId !== null` check that disables concurrent starts\n5. Render multiple WorkProgressCard components by mapping over the Map\n\n**Interface:**\n```typescript\ninterface ActiveWorkSession {\n  issueId: string\n  issueTitle: string\n  startedAt: number\n}\n```\n\n**Example transformation:**\nBefore: \n`const [activeWorkIssueId, setActiveWorkIssueId] = useState\u003cstring | null\u003e(null)`\n\nAfter:\n`const [activeWorkSessions, setActiveWorkSessions] = useState\u003cMap\u003cstring, ActiveWorkSession\u003e\u003e(new Map())`","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-24T11:49:36.074029-07:00","updated_at":"2025-12-24T11:56:06.681991-07:00","closed_at":"2025-12-24T11:56:06.681991-07:00","close_reason":"Implemented multi-session state management","dependencies":[{"issue_id":"server-cwc.4","depends_on_id":"server-cwc","type":"parent-child","created_at":"2025-12-24T11:49:36.076477-07:00","created_by":"daemon"}]}
{"id":"server-cwc.5","title":"Phase 2: Enhance WorkProgressCard with duration and dismiss","description":"Add enhancements to WorkProgressCard component for better multi-session UX.\n\n**Changes needed:**\n1. Add `startedAt` prop to calculate running duration\n2. Display duration badge (e.g., \"Running for 2m 34s\")\n3. Add \"Dismiss\" button for completed/errored cards (removes from UI without canceling)\n4. Add `onDismiss` callback prop\n5. Make card clickable for detail modal (prepare for Phase 3)\n6. Add hover effect to indicate clickability\n7. Compact styling when multiple cards are stacked\n\n**Example duration calculation:**\n```typescript\nconst elapsed = Date.now() - startedAt\nconst minutes = Math.floor(elapsed / 60000)\nconst seconds = Math.floor((elapsed % 60000) / 1000)\nreturn `${minutes}m ${seconds}s`\n```\n\n**Files:** packages/ui/src/components/WorkProgressCard.tsx","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-24T11:49:36.414525-07:00","updated_at":"2025-12-24T11:49:36.414525-07:00","dependencies":[{"issue_id":"server-cwc.5","depends_on_id":"server-cwc","type":"parent-child","created_at":"2025-12-24T11:49:36.416802-07:00","created_by":"daemon"}]}
{"id":"server-cwc.6","title":"Phase 3: Create WorkProgressModal for detailed event view","description":"Create a new modal component showing full details of an agent work session.\n\n**Component:** packages/ui/src/components/WorkProgressModal.tsx\n\n**Features:**\n1. Full event history (not truncated to recent 10)\n2. Expandable sections for each event type\n3. Syntax highlighting for code/commands\n4. Filterable event list (by type: tool_call, file_read, file_write, shell_command)\n5. Search functionality\n6. Session stats: duration, steps completed, tools used, files changed\n7. Copy buttons for useful data\n\n**Design patterns:**\n- Glass morphism modal with backdrop blur\n- Split pane: event list (left), details panel (right)\n- Color-coded event types matching card icons\n- Close on escape or backdrop click\n- Follows Digital Abacus design system\n\n**Props interface:**\n```typescript\ninterface WorkProgressModalProps {\n  isOpen: boolean\n  onClose: () =\u003e void\n  issueId: string\n  issueTitle: string\n  workState: AgentWorkState\n  startedAt?: number\n}\n```\n\n**Integration:** Update WorkProgressCard to open modal on click","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-24T11:49:36.760243-07:00","updated_at":"2025-12-24T11:49:36.760243-07:00","dependencies":[{"issue_id":"server-cwc.6","depends_on_id":"server-cwc","type":"parent-child","created_at":"2025-12-24T11:49:36.761601-07:00","created_by":"daemon"}]}
{"id":"server-d98","title":"Persist projects to JSON file system storage","description":"We currently persist project information in local storage, but i want to move the data to a locally persistem json file instead","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-23T23:53:41.335092-07:00","updated_at":"2025-12-24T11:20:17.939229-07:00","close_reason":"Closed","labels":["ai-plan-generated","backend","feature","json","refactor","storage"],"comments":[{"id":1,"issue_id":"server-d98","author":"garymjr","text":"ðŸ¤– AI-Generated Plan\n\nCreate a backend file system storage service with JSON persistence, expose REST API endpoints for project CRUD operations, update the frontend to use the API instead of localStorage, and implement a one-time migration from localStorage to the new storage mechanism.\n\n**Subtasks:**\n1. **Create file system storage service on backend** - Create packages/server/src/services/storage.service.ts with functions for reading/writing JSON files. Implement createProject, getProject, listProjects, updateProject, and deleteProject methods. Use Node.js fs.promises for async file operations. Create a .data/projects directory if it doesn't exist. Add proper error handling for ENOENT, EACCES, and JSON parse errors.\n2. **Create REST API endpoints for project CRUD** - Add routes in packages/server/src/routes/projects.ts for GET /api/projects (list), GET /api/projects/:id (read), POST /api/projects (create), PUT /api/projects/:id (update), DELETE /api/projects/:id (delete). Integrate with storage.service.ts. Add request validation using zod or similar. Return proper HTTP status codes (200, 201, 404, 400, 500). Register routes in the main server file.\n3. **Create API client service on frontend** - Create packages/ui/src/lib/api/projects.ts with functions matching the backend endpoints (getProjects, getProject, createProject, updateProject, deleteProject). Use fetch or axios for HTTP requests. Implement proper error handling with try/catch and typed return values. Add loading state management if needed.\n4. **Update frontend to use API instead of localStorage** - Find all localStorage usage in packages/ui (grep for 'localStorage'). Replace direct localStorage calls with the new API client functions. Update any React hooks or components that read/write project data. Ensure loading states are handled during async operations. Test the UI to verify projects load and save correctly.\n5. **Implement localStorage to JSON file migration** - Create packages/ui/src/lib/migration.ts with a migrateFromLocalStorage() function. Check for existing projects in localStorage on app init. If found, send to backend via createProject API calls, then clear localStorage. Add a migration flag to localStorage to prevent re-migration. Show a loading indicator during migration.\n6. **Add backend tests for storage service and API** - Create packages/server/src/services/storage.service.test.ts. Test file creation, reading, writing, updating, deleting, and error cases (corrupted JSON, missing files). Create packages/server/src/routes/projects.test.ts. Test each endpoint with valid/invalid data. Use jest with fs mock or temp directory for file system tests.\n\n**Risks \u0026 Considerations:**\n- Concurrent write conflicts if multiple browser tabs modify the same project\n- Data loss if migration fails partway through - need transaction-like behavior\n- File system permissions issues on different operating systems\n- Large project files causing performance issues\n- Backward compatibility if users have existing localStorage data and server is unavailable\n","created_at":"2025-12-24T16:24:33Z"},{"id":2,"issue_id":"server-d98","author":"garymjr","text":"âœ… Completed by agent:\n\nLet me start implementing:","created_at":"2025-12-24T16:24:33Z"},{"id":3,"issue_id":"server-d98","author":"garymjr","text":"âœ… Completed by agent:\n\nI'll help you implement JSON file system storage for projects. Let me start by exploring the codebase to understand the current implementation.","created_at":"2025-12-24T16:24:33Z"},{"id":4,"issue_id":"server-d98","author":"garymjr","text":"âœ… Completed by agent:\n\nI'll help you implement JSON file system storage for projects. Let me start by exploring the codebase to understand the current implementation.","created_at":"2025-12-24T16:24:33Z"},{"id":9,"issue_id":"server-d98","author":"gamurray","text":"ðŸ¤– AI-Generated Plan\n\nCreate a JSON file storage service to replace localStorage for project persistence. The backend will expose API endpoints for CRUD operations on projects stored in a projects.json file, and the UI will be updated to fetch from these endpoints instead of reading from localStorage. A one-time migration script will transfer existing localStorage data to the new file-based storage.\n\n**Subtasks:**\n1. **Create JSON file storage service in backend** - Create packages/server/src/services/projectStorage.ts with a ProjectStorage class that handles reading/writing to a data/projects.json file. Implement methods: readProjects(), writeProjects(projects), and ensureProjectDirectory(). Include error handling for file system operations, file locking for concurrent writes, and data validation using Zod schemas matching the existing Project type.\n2. **Add project API endpoints to backend server** - Create packages/server/src/routes/projects.ts with REST endpoints: GET /api/projects (list all), GET /api/projects/:id (get one), POST /api/projects (create), PUT /api/projects/:id (update), DELETE /api/projects/:id (delete). Integrate with ProjectStorage service. Add request validation using Zod and return appropriate status codes (200, 201, 404, 400). Register routes in packages/server/src/index.ts.\n3. **Create localStorage to JSON file migration script** - Create packages/server/scripts/migrateFromLocalStorage.ts. Script should: 1) Read localStorage data export (JSON file), 2) Validate against Project schema, 3) Merge with existing projects.json (if any), 4) Write to data/projects.json via ProjectStorage. Add npm script 'bun migrate:projects' to run it. Include dry-run mode and backup creation before writing.\n4. **Update UI to use API instead of localStorage** - Refactor packages/ui/src/routes/index.tsx to replace localStorage.getItem/setItem calls with API fetch requests. Create packages/ui/src/api/projects.ts with functions: getProjects(), getProject(id), createProject(data), updateProject(id, data), deleteProject(id). Update all components using project data to use these API functions. Handle loading/error states appropriately.\n5. **Add unit tests for project storage service** - Create packages/server/src/services/projectStorage.test.ts. Test cases: file creation, reading empty storage, writing projects, updating existing projects, deleting projects, concurrent write handling, invalid data handling, and error recovery. Use Jest with fs mocks and temporary test directories. Ensure 100% coverage of ProjectStorage methods.\n6. **Add integration tests for project API endpoints** - Create packages/server/src/routes/projects.test.ts. Use supertest to test all endpoints: successful CRUD operations, validation errors for malformed data, 404 for non-existent projects, and error handling for storage failures. Test with actual temporary file storage to verify end-to-end functionality.\n7. **Configure data directory and add to gitignore** - Add data/ to .gitignore to prevent committing user projects. Ensure packages/server initializes data directory on startup if it doesn't exist. Add environment variable PROJECTS_DATA_PATH (default: ./data/projects.json) for configurable storage location. Update README.md with new storage architecture documentation.\n\n**Risks \u0026 Considerations:**\n- Data corruption during concurrent writes - need proper file locking or atomic write patterns\n- Migration from localStorage may fail if data format has changed - need robust validation and rollback\n- File system permissions issues on different operating systems - need proper error handling\n- Performance degradation with large project files - consider indexing or pagination for future\n- Race conditions between UI components updating same project - may need optimistic locking or versioning\n","created_at":"2025-12-24T16:31:04Z"}],"deleted_at":"2025-12-24T11:20:17.939229-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"server-d98.1","title":"Create file system storage service on backend","description":"Create packages/server/src/services/storage.service.ts with functions for reading/writing JSON files. Implement createProject, getProject, listProjects, updateProject, and deleteProject methods. Use Node.js fs.promises for async file operations. Create a .data/projects directory if it doesn't exist. Add proper error handling for ENOENT, EACCES, and JSON parse errors.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-23T23:54:02.669573-07:00","updated_at":"2025-12-24T11:20:17.939229-07:00","close_reason":"Closed","deleted_at":"2025-12-24T11:20:17.939229-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-d98.2","title":"Create REST API endpoints for project CRUD","description":"Add routes in packages/server/src/routes/projects.ts for GET /api/projects (list), GET /api/projects/:id (read), POST /api/projects (create), PUT /api/projects/:id (update), DELETE /api/projects/:id (delete). Integrate with storage.service.ts. Add request validation using zod or similar. Return proper HTTP status codes (200, 201, 404, 400, 500). Register routes in the main server file.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-23T23:54:02.706979-07:00","updated_at":"2025-12-24T11:20:17.939229-07:00","close_reason":"Closed","deleted_at":"2025-12-24T11:20:17.939229-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-d98.3","title":"Create API client service on frontend","description":"Create packages/ui/src/lib/api/projects.ts with functions matching the backend endpoints (getProjects, getProject, createProject, updateProject, deleteProject). Use fetch or axios for HTTP requests. Implement proper error handling with try/catch and typed return values. Add loading state management if needed.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-23T23:54:02.742316-07:00","updated_at":"2025-12-24T11:20:17.939229-07:00","close_reason":"Closed","comments":[{"id":5,"issue_id":"server-d98.3","author":"garymjr","text":"âœ… Completed by agent:\n\nI'll implement subtask server-d98.3 to create the API client service on the frontend. Let me first examine the existing codebase structure and the Project type definitions.Now let me check the types and the existing Project interface:The Project interface is not in the API types. Let me create the projects API client file with proper types following the existing pattern:","created_at":"2025-12-24T16:24:33Z"},{"id":13,"issue_id":"server-d98.3","author":"gamurray","text":"âœ… Completed by agent:\n\n## Summary","created_at":"2025-12-24T17:58:55Z"}],"deleted_at":"2025-12-24T11:20:17.939229-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-d98.4","title":"Update frontend to use API instead of localStorage","description":"Find all localStorage usage in packages/ui (grep for 'localStorage'). Replace direct localStorage calls with the new API client functions. Update any React hooks or components that read/write project data. Ensure loading states are handled during async operations. Test the UI to verify projects load and save correctly.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-23T23:54:02.775143-07:00","updated_at":"2025-12-24T11:20:17.939229-07:00","close_reason":"Closed","comments":[{"id":6,"issue_id":"server-d98.4","author":"garymjr","text":"âœ… Completed by agent:\n\nI've analyzed the codebase and found that **subtask server-d98.4 cannot be completed** because the following prerequisite subtasks have not been implemented:","created_at":"2025-12-24T16:24:33Z"},{"id":12,"issue_id":"server-d98.4","author":"gamurray","text":"âœ… Completed by agent:\n\n## Summary","created_at":"2025-12-24T17:55:29Z"}],"deleted_at":"2025-12-24T11:20:17.939229-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-d98.5","title":"Implement localStorage to JSON file migration","description":"Create packages/ui/src/lib/migration.ts with a migrateFromLocalStorage() function. Check for existing projects in localStorage on app init. If found, send to backend via createProject API calls, then clear localStorage. Add a migration flag to localStorage to prevent re-migration. Show a loading indicator during migration.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-23T23:54:02.806618-07:00","updated_at":"2025-12-24T11:20:17.939229-07:00","close_reason":"Closed","comments":[{"id":7,"issue_id":"server-d98.5","author":"garymjr","text":"âœ… Completed by agent:\n\nI'll implement the localStorage to JSON file migration for subtask server-d98.5. Let me first explore what has been implemented in the previous subtasks.","created_at":"2025-12-24T16:24:33Z"},{"id":11,"issue_id":"server-d98.5","author":"gamurray","text":"âœ… Completed by agent:\n\n## Summary","created_at":"2025-12-24T17:50:28Z"}],"deleted_at":"2025-12-24T11:20:17.939229-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-d98.6","title":"Add backend tests for storage service and API","description":"Create packages/server/src/services/storage.service.test.ts. Test file creation, reading, writing, updating, deleting, and error cases (corrupted JSON, missing files). Create packages/server/src/routes/projects.test.ts. Test each endpoint with valid/invalid data. Use jest with fs mock or temp directory for file system tests.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-23T23:54:02.837217-07:00","updated_at":"2025-12-24T11:20:17.939229-07:00","close_reason":"Closed","comments":[{"id":8,"issue_id":"server-d98.6","author":"garymjr","text":"âœ… Completed by agent:\n\nI'll implement the backend tests for the storage service and API. Let me start by exploring the existing codebase to understand the structure.","created_at":"2025-12-24T16:24:33Z"},{"id":10,"issue_id":"server-d98.6","author":"gamurray","text":"âœ… Completed by agent:\n\n## Summary","created_at":"2025-12-24T17:45:58Z"}],"deleted_at":"2025-12-24T11:20:17.939229-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-d98.7","title":"Configure data directory and add to gitignore","description":"Add data/ to .gitignore to prevent committing user projects. Ensure packages/server initializes data directory on startup if it doesn't exist. Add environment variable PROJECTS_DATA_PATH (default: ./data/projects.json) for configurable storage location. Update README.md with new storage architecture documentation.","status":"tombstone","priority":2,"issue_type":"chore","created_at":"2025-12-24T09:31:06.571896-07:00","updated_at":"2025-12-24T09:31:38.445395-07:00","close_reason":"Closed","deleted_at":"2025-12-24T09:31:38.445395-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"chore"}
{"id":"server-hsd","title":"Test title and labels generation","description":"Testing title and labels generation","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-23T21:39:18.019592-07:00","updated_at":"2025-12-24T09:30:35.107101-07:00","labels":["task-mgmt","tests","validation"],"deleted_at":"2025-12-24T09:30:35.107101-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"server-w0x","title":"Initialize Agent Core","description":"Bootstrap the primary agent with system prompts and tool bindings","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-23T14:32:17.240092-07:00","updated_at":"2025-12-24T09:30:35.107101-07:00","labels":["core","setup"],"deleted_at":"2025-12-24T09:30:35.107101-07:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
